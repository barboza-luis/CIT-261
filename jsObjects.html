<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="utf-8">
<meta name="description" content="Javascrip Objects - Object Creation Functions, Inheritance, Properties, Methods, Instantiation.">
<meta name="author" content="Luis Barboza">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#ffffff">
        
<title>CIT 261 - Javascrip Objects - Object Creation Functions, Inheritance, Properties, Methods, Instantiation.</title>
        
<meta name="theme-color" content="#ffffff">

<style>

</style>

<link rel="stylesheet" type="text/css" href="styles.css">

</head>
<body style="font-size:14px;">

<table style="width: 650px">
    <tr>
        <td>
            <h2><a href="index.html">&lt;&lt;</a> Javascrip Objects - Object Creation Functions, Inheritance, Properties, Methods, Instantiation.</h2>
            <p><b>Objects</b>. JavaScript variables can contain single values. Objects are variables too. But objects can contain many values. The values are written as <b>name: value</b> pairs (name and value separated by a colon).</p>
            <p>
                <b>Object Properties</b>. The named values, in JavaScript objects, are called properties. Object properties can be both primitive values, other objects, and functions.
                <b>Object Methods</b>. Methods are actions that can be performed on objects. An object method is an object property containing a function definition.
            </p>
            <p>
                <b>Object Inheritance</b> is the mechanism of basing an object or class upon another object.
                <b>Object Instance</b> is a concrete occurrence of any object, existing usually during the runtime of a computer program.
            </p>
            <hr>
            <p>In this example I save Data in localStorage using objects.</p>
        </td>
    </tr>
</table>
<form id="oForm" onsubmit="return false;">
<table style="width: 650px">
    <tr>
        <td><label for="issn">ISSN</label></td>
        <td><input type="text" name="issn" id="issn" size="10"></td>
    </tr>
    <tr>
        <td><label for="title">Title</label></td>
        <td><input type="text" name="title" id="title" size="50"></td>
    </tr>
    <tr>
        <td><label for="month">Month</label></td>
        <td><select id="month" name="month">
            <option value="">Select Month</option>
            <option value="1">Jan</option>
            <option value="2">Feb</option>
            <option value="3">Mar</option>
            <option value="4">Apr</option>
            <option value="5">May</option>
            <option value="6">Jun</option>
            <option value="7">Jul</option>
            <option value="8">Aug</option>
            <option value="9">Sep</option>
            <option value="10">Oct</option>
            <option value="11">Nov</option>
            <option value="12">Dec</option>
        </select></td>
    </tr>
    <tr>
        <td><label for="year">Year</label></td>
        <td><input type="number" name="year" id="year" size="4"></td>
    </tr>
    <tr>
        <td><label for="publishedBy">Published By</label></td>
        <td><input type="text" name="publishedBy" id="publishedBy" size="50"></td>
    </tr>
    <tr>
        <td><label for="numberOfPages">Number Of Pages</label></td>
        <td><input type="number" name="numberOfPages" id="numberOfPages" size="6"></td>
    </tr>
    <tr>
        <td><label for="language">Language</label></td>
        <td>
            <radiogroup>
                <input type="radio" id="English" name="language" value="English" checked><label for="English">&nbsp;English</label>
                <input type="radio" id="Spanish" name="language" value="Spanish"><label for="Spanish">&nbsp;Spanish</label>
                <input type="radio" id="German" name="language" value="German"><label for="German">&nbsp;German</label>
                <input type="radio" id="Italian" name="language" value="Italian"><label for="Italian">&nbsp;Italian</label>
                <input type="radio" id="French" name="language" value="French"><label for="French">&nbsp;French</label>
            </radiogroup>
        </td>
    </tr>
    <tr>
        <td><label for="author">Author</label></td>
        <td><input type="text" name="author" id="author" size="50"></td>
    </tr>
    <tr>
        <td><label for="edition">Edition</label></td>
        <td><input type="number" name="edition" id="edition" size="3"></td>
    </tr>
    <tr>
        <td><label for="borrowed">Borrowed</label></td>
        <td><input type="checkbox" name="borrowed" id="borrowed"></td>
    </tr>
    <tr>
        <td style="vertical-align: top;"><label for="lastCustomers">Last Customers</label><br><small>(One customer id per line)</small></td>
        <td><textarea name="lastCustomers" id="lastCustomers" rows="6" cols="25"></textarea></td>
    </tr>
</table>
</form>
<br>
<button onclick="gObj('oForm').reset();">Reset</button>
<button onclick="location.reload();">Reload</button>&nbsp;
<button onclick="setOriginal();">Set Original</button>&nbsp;
<button onclick="setStoreIt();">Set Store it</button>&nbsp;
<button onclick="saveInfo();">Save</button>
<button onclick="showString();">To String</button>

<script>

// Object declaration
var book = {
    //Properties
    issn: '',
    title: '',
    month: 1,
    year: 2019,
    publishedBy: '',
    numberOfPages: 1,
    language: 'English',
    author: '',
    edition: 1,
    borrowed: false,
    lastCustomers: [],
    //Methods
    init: function (issn, title, month, year, publishedBy, numberOfPages, language, author, edition, borrowed, lastCustomers){
        //Initialize the values given to the object
        this.issn = issn;
        this.title = title;
        this.month = month;
        this.year = year;
        this.publishedBy = publishedBy;
        this.numberOfPages = numberOfPages;
        this.language = language;
        this.author = author;
        this.edition = edition;
        this.borrowed = borrowed;
        this.lastCustomers = lastCustomers;
    },
    original: function (){
        //Set an example called Original
        this.issn = '1789138086';
        this.title = 'Full Stack Development with Spring Boot 2.0 and React';
        this.month = 6;
        this.year = 2018;
        this.publishedBy = 'Packt Publishing';
        this.numberOfPages = 302;
        this.language = 'English';
        this.author = 'Juha Hinkula';
        this.edition = 1;
        this.borrowed = false;
        this.lastCustomers = ['A78945623', 'T89456578', 'E12035645', 'A15903576', 'T26483791'];
    },
    parse: function (text){
        //Receive an object book like text and initialize
        var obj = JSON.parse(text);
        for(ppty in obj){
            if(typeof(obj[ppty])!=="undefined"){
                eval('this.' + ppty + ' = obj[ppty];');
            }
        }
    },
    stringify: function (){
        //Convert the object in JSON text format for this object
        return JSON.stringify(this);
    },
    getText: function () {
        //Return a the object in readable text
		var info = "Book Information";
		info+= "\nISSN-10: " + this.issn;
		info+= "\nTitle: " + this.title;
		info+= "\nMonth: " + this.month;
		info+= "\nYear: " + this.year;
		info+= "\n Published By: " + this.publishedBy;
		info+= "\nNumber of Pages: " + this.numberOfPages;
		info+= "\nLanguage: " + this.language;
        info+= "\nAuthor: " + this.author;
        info+= "\nEdition: " + this.edition;
        info+= "\nBorrowed: " + this.borrowed;
        info+= "\nLast Customers Id: (" + this.lastCustomers.join(", ") + ")";
		return info;
	}
}

var cBook = Object.create(book);

function gObj(id){
    return document.getElementById(id)
}

//Set the object values in the form fields
function fillForm(oBook){
    gObj('issn').value = oBook.issn;
    gObj('title').value = oBook.title;
    gObj('month').value = oBook.month;
    gObj('year').value = oBook.year;
    gObj('publishedBy').value = oBook.publishedBy;
    gObj('numberOfPages').value = oBook.numberOfPages;
    gObj(oBook.language).checked = true;
    gObj('author').value = oBook.author;
    gObj('edition').value = oBook.edition;
    gObj('borrowed').checked = oBook.borrowed;
    gObj('lastCustomers').value = oBook.lastCustomers.join("\n");   
}

//Get the values from the from and initialize the object with them
function getForm(){
    cBook.init(
        gObj('issn').value, gObj('title').value, gObj('month').value, 
        gObj('year').value, gObj('publishedBy').value, gObj('numberOfPages').value, 
        ((gObj('English').checked) ? 'English' : ((gObj('Spanish').checked) ? 'Spanish' : ((gObj('German').checked) ? 'German' : ((gObj('Italian').checked) ? 'Italian' : 'French')))),
        gObj('author').value, gObj('edition').value, gObj('borrowed').checked, 
        gObj('lastCustomers').value.split("\n")
    );
}

//Set the given information
function setInfo(vBook, saveIt){
    fillForm(vBook);
    if(saveIt){
        cBook = vBook;
        localStorage.book = vBook.stringify();
    }
}

//Save the data in the localStorage
function saveInfo(){
    getForm();
    localStorage.book = vBook.stringify();
}

//Display the data store in the localStorage
function setStoreIt(){
    var tmp = Object.create(book);
    tmp.parse(localStorage.book)
    setInfo(tmp,false);
}

//Set the example record in the form 
function setOriginal(){
    var tmp = Object.create(book);
    tmp.original();
    setInfo(tmp, false);
}

//Shows the readable message
function showString(){
    var txt = cBook.getText();
    alert(txt);
}

//Initialize the form
if(typeof(localStorage.book)==="undefined"){
    cBook.original();
    setInfo(cBook,true);
} else{
    cBook.parse(localStorage.book);
    setInfo(cBook,false);
}

</script>

</body>
</html>